simple-apns-client
==================

これはなに？
------------

c で書かれた Apple Push Notification Service Client です。

使い方
------

* client の起動

以下のコマンドで client を起動すると、 APNs への接続及び通知データ待ち受け用の TCP サーバを起動します。

    $ make
    $ ./main -d \
             -c <CERTIFICATE_CHAIN_FILE_PATH> \
             -k <PRIVATE_KEY_FILE_PATH> \
             -p <PORT_NUMBER>

* 通知データの送信

-p で指定した port に TCP で以下の形式のパケットを送信すると、 それが APNs サーバに送信されます。

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | APNs DEVICE TOKEN                                             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | PAYLOAD LENGTH                | PAYLOAD
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     ... (MAX 256 byte)
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
